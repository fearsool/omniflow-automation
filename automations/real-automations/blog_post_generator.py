#!/usr/bin/env python3
"""
Blog YazÄ±sÄ± Ãœretici
AI ile SEO uyumlu blog yazÄ±sÄ± Ã¼retir

Auto-generated by OmniFlow Factory
"""

# Auto-generated API Connectors
import requests
import os
from dotenv import load_dotenv
load_dotenv()

def huggingface_generate(prompt: str, model: str = "mistralai/Mistral-7B-Instruct-v0.2") -> str:
    """HuggingFace ile metin Ã¼ret"""
    API_URL = f"https://api-inference.huggingface.co/models/{model}"
    headers = {"Authorization": f"Bearer {os.getenv('HUGGINGFACE_TOKEN')}"}
    
    payload = {
        "inputs": prompt,
        "parameters": {
            "max_new_tokens": 500,
            "temperature": 0.7,
            "top_p": 0.9,
            "do_sample": True
        }
    }
    
    response = requests.post(API_URL, headers=headers, json=payload)
    if response.status_code == 200:
        result = response.json()
        if isinstance(result, list) and len(result) > 0:
            return result[0].get('generated_text', '').replace(prompt, '').strip()
    return ""

# ============================================
# MAIN AUTOMATION CODE
# ============================================

def generate_blog_post(topic: str, keywords: list = None) -> dict:
    """Blog yazÄ±sÄ± Ã¼ret"""
    keyword_str = ", ".join(keywords) if keywords else ""
    
    prompt = f"""Bir blog yazÄ±sÄ± yaz:
Konu: {topic}
Anahtar kelimeler: {keyword_str}

Format:
# [BaÅŸlÄ±k]

[GiriÅŸ paragrafÄ±]

## [Alt BaÅŸlÄ±k 1]
[Ä°Ã§erik]

## [Alt BaÅŸlÄ±k 2]
[Ä°Ã§erik]

## SonuÃ§
[SonuÃ§ paragrafÄ±]

---
YazÄ± profesyonel, SEO uyumlu ve 500-800 kelime olmalÄ±.
"""
    
    content = huggingface_generate(prompt)
    
    return {
        "topic": topic,
        "content": content,
        "keywords": keywords,
        "word_count": len(content.split())
    }

if __name__ == "__main__":
    import sys
    topic = sys.argv[1] if len(sys.argv) > 1 else "Yapay Zeka ve Gelecek"
    keywords = sys.argv[2].split(",") if len(sys.argv) > 2 else ["AI", "teknoloji", "gelecek"]
    
    print("ğŸš€ Blog yazÄ±sÄ± Ã¼retiliyor...")
    result = generate_blog_post(topic, keywords)
    print("=" * 50)
    print(f"ğŸ“ Konu: {result['topic']}")
    print(f"ğŸ“Š Kelime sayÄ±sÄ±: {result['word_count']}")
    print("=" * 50)
    print(result['content'])
